"use strict";
import { checkDragElementIgnoresDropElement } from "../utilities/reference";
import { DROP_CUSTOM_EVENT_TYPE, DRAG_OUT_CUSTOM_EVENT_TYPE, DRAG_OVER_CUSTOM_EVENT_TYPE } from "../customEventTypes";
var dropElement = null;
Object.assign(globalThis, {
    dropElement: dropElement
});
function drop(dragElement, aborted, done) {
    var customEventType = DROP_CUSTOM_EVENT_TYPE;
    this.callCustomHandlersAsync(customEventType, dragElement, aborted, done);
}
function dragOut(dragElement) {
    var customEventType = DRAG_OUT_CUSTOM_EVENT_TYPE;
    this.callCustomHandlers(customEventType, dragElement);
}
function dragOver(dragElement) {
    var customEventType = DRAG_OVER_CUSTOM_EVENT_TYPE;
    this.callCustomHandlers(customEventType, dragElement);
}
function enableDrop() {
    this.onMouseOut(mouseOutHandler, this);
    this.onMouseOver(mouseOverHandler, this);
}
function disableDrop() {
    this.offMouseOut(mouseOutHandler, this);
    this.offMouseOver(mouseOverHandler, this);
}
function onCustomDrop(dropCustomHandler, element) {
    var customEventType = DROP_CUSTOM_EVENT_TYPE, customHandler = dropCustomHandler; ///
    this.onCustomEvent(customEventType, customHandler, element);
}
function offCustomDrop(dropCustomHandler, element) {
    var customEventType = DROP_CUSTOM_EVENT_TYPE, customHandler = dropCustomHandler; ///
    this.offCustomEvent(customEventType, customHandler, element);
}
function onCustomDragOut(dragOutCustomHandler, element) {
    var customEventType = DRAG_OUT_CUSTOM_EVENT_TYPE, customHandler = dragOutCustomHandler; ///
    this.onCustomEvent(customEventType, customHandler, element);
}
function offCustomDragOut(dragOutCustomHandler, element) {
    var customEventType = DRAG_OUT_CUSTOM_EVENT_TYPE, customHandler = dragOutCustomHandler; ///
    this.offCustomEvent(customEventType, customHandler, element);
}
function onCustomDragOver(dragOverCustomHandler, element) {
    var customEventType = DRAG_OVER_CUSTOM_EVENT_TYPE, customHandler = dragOverCustomHandler; ///
    this.onCustomEvent(customEventType, customHandler, element);
}
function offCustomDragOver(dragOverCustomHandler, element) {
    var customEventType = DRAG_OVER_CUSTOM_EVENT_TYPE, customHandler = dragOverCustomHandler; ///
    this.offCustomEvent(customEventType, customHandler, element);
}
export default {
    drop: drop,
    dragOut: dragOut,
    dragOver: dragOver,
    enableDrop: enableDrop,
    disableDrop: disableDrop,
    onCustomDrop: onCustomDrop,
    offCustomDrop: offCustomDrop,
    onCustomDragOut: onCustomDragOut,
    offCustomDragOut: offCustomDragOut,
    onCustomDragOver: onCustomDragOver,
    offCustomDragOver: offCustomDragOver
};
function mouseOutHandler(event, element) {
    var dragElement = globalThis.dragElement;
    if (dragElement !== null) {
        var dropElement = null; ///
        Object.assign(globalThis, {
            dropElement: dropElement
        });
        this.dragOut(dragElement);
    }
    event.stopPropagation();
}
function mouseOverHandler(event, element) {
    var dragElement = globalThis.dragElement;
    if (dragElement !== null) {
        var dropElement = this, dragElementIgnoresDropElement = checkDragElementIgnoresDropElement(dragElement, dropElement);
        if (dragElementIgnoresDropElement) {
            return;
        }
        Object.assign(globalThis, {
            dropElement: dropElement
        });
        this.dragOver(dragElement);
    }
    event.stopPropagation();
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9taXhpbnMvZHJvcC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuaW1wb3J0IHsgY2hlY2tEcmFnRWxlbWVudElnbm9yZXNEcm9wRWxlbWVudCB9IGZyb20gXCIuLi91dGlsaXRpZXMvcmVmZXJlbmNlXCI7XG5pbXBvcnQgeyBEUk9QX0NVU1RPTV9FVkVOVF9UWVBFLCBEUkFHX09VVF9DVVNUT01fRVZFTlRfVFlQRSwgRFJBR19PVkVSX0NVU1RPTV9FVkVOVF9UWVBFIH0gZnJvbSBcIi4uL2N1c3RvbUV2ZW50VHlwZXNcIjtcblxuY29uc3QgZHJvcEVsZW1lbnQgPSBudWxsO1xuXG5PYmplY3QuYXNzaWduKGdsb2JhbFRoaXMsIHtcbiAgZHJvcEVsZW1lbnRcbn0pO1xuXG5mdW5jdGlvbiBkcm9wKGRyYWdFbGVtZW50LCBhYm9ydGVkLCBkb25lKSB7XG4gIGNvbnN0IGN1c3RvbUV2ZW50VHlwZSA9IERST1BfQ1VTVE9NX0VWRU5UX1RZUEU7XG5cbiAgdGhpcy5jYWxsQ3VzdG9tSGFuZGxlcnNBc3luYyhjdXN0b21FdmVudFR5cGUsIGRyYWdFbGVtZW50LCBhYm9ydGVkLCBkb25lKTtcbn1cblxuZnVuY3Rpb24gZHJhZ091dChkcmFnRWxlbWVudCkge1xuICBjb25zdCBjdXN0b21FdmVudFR5cGUgPSBEUkFHX09VVF9DVVNUT01fRVZFTlRfVFlQRTtcblxuICB0aGlzLmNhbGxDdXN0b21IYW5kbGVycyhjdXN0b21FdmVudFR5cGUsIGRyYWdFbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gZHJhZ092ZXIoZHJhZ0VsZW1lbnQpIHtcbiAgY29uc3QgY3VzdG9tRXZlbnRUeXBlID0gRFJBR19PVkVSX0NVU1RPTV9FVkVOVF9UWVBFO1xuXG4gIHRoaXMuY2FsbEN1c3RvbUhhbmRsZXJzKGN1c3RvbUV2ZW50VHlwZSwgZHJhZ0VsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiBlbmFibGVEcm9wKCkge1xuICB0aGlzLm9uTW91c2VPdXQobW91c2VPdXRIYW5kbGVyLCB0aGlzKTtcbiAgdGhpcy5vbk1vdXNlT3Zlcihtb3VzZU92ZXJIYW5kbGVyLCB0aGlzKTtcbn1cblxuZnVuY3Rpb24gZGlzYWJsZURyb3AoKSB7XG4gIHRoaXMub2ZmTW91c2VPdXQobW91c2VPdXRIYW5kbGVyLCB0aGlzKTtcbiAgdGhpcy5vZmZNb3VzZU92ZXIobW91c2VPdmVySGFuZGxlciwgdGhpcyk7XG59XG5cbmZ1bmN0aW9uIG9uQ3VzdG9tRHJvcChkcm9wQ3VzdG9tSGFuZGxlciwgZWxlbWVudCkge1xuICBjb25zdCBjdXN0b21FdmVudFR5cGUgPSBEUk9QX0NVU1RPTV9FVkVOVF9UWVBFLFxuICAgICAgICBjdXN0b21IYW5kbGVyID0gZHJvcEN1c3RvbUhhbmRsZXI7ICAvLy9cblxuICB0aGlzLm9uQ3VzdG9tRXZlbnQoY3VzdG9tRXZlbnRUeXBlLCBjdXN0b21IYW5kbGVyLCBlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gb2ZmQ3VzdG9tRHJvcChkcm9wQ3VzdG9tSGFuZGxlciwgZWxlbWVudCkge1xuICBjb25zdCBjdXN0b21FdmVudFR5cGUgPSBEUk9QX0NVU1RPTV9FVkVOVF9UWVBFLFxuICAgICAgICBjdXN0b21IYW5kbGVyID0gZHJvcEN1c3RvbUhhbmRsZXI7ICAvLy9cblxuICB0aGlzLm9mZkN1c3RvbUV2ZW50KGN1c3RvbUV2ZW50VHlwZSwgY3VzdG9tSGFuZGxlciwgZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIG9uQ3VzdG9tRHJhZ091dChkcmFnT3V0Q3VzdG9tSGFuZGxlciwgZWxlbWVudCkge1xuICBjb25zdCBjdXN0b21FdmVudFR5cGUgPSBEUkFHX09VVF9DVVNUT01fRVZFTlRfVFlQRSxcbiAgICAgICAgY3VzdG9tSGFuZGxlciA9IGRyYWdPdXRDdXN0b21IYW5kbGVyOyAgLy8vXG5cbiAgdGhpcy5vbkN1c3RvbUV2ZW50KGN1c3RvbUV2ZW50VHlwZSwgY3VzdG9tSGFuZGxlciwgZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIG9mZkN1c3RvbURyYWdPdXQoZHJhZ091dEN1c3RvbUhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgY29uc3QgY3VzdG9tRXZlbnRUeXBlID0gRFJBR19PVVRfQ1VTVE9NX0VWRU5UX1RZUEUsXG4gICAgICAgIGN1c3RvbUhhbmRsZXIgPSBkcmFnT3V0Q3VzdG9tSGFuZGxlcjsgIC8vL1xuXG4gIHRoaXMub2ZmQ3VzdG9tRXZlbnQoY3VzdG9tRXZlbnRUeXBlLCBjdXN0b21IYW5kbGVyLCBlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gb25DdXN0b21EcmFnT3ZlcihkcmFnT3ZlckN1c3RvbUhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgY29uc3QgY3VzdG9tRXZlbnRUeXBlID0gRFJBR19PVkVSX0NVU1RPTV9FVkVOVF9UWVBFLFxuICAgICAgICBjdXN0b21IYW5kbGVyID0gZHJhZ092ZXJDdXN0b21IYW5kbGVyOyAgLy8vXG5cbiAgdGhpcy5vbkN1c3RvbUV2ZW50KGN1c3RvbUV2ZW50VHlwZSwgY3VzdG9tSGFuZGxlciwgZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIG9mZkN1c3RvbURyYWdPdmVyKGRyYWdPdmVyQ3VzdG9tSGFuZGxlciwgZWxlbWVudCkge1xuICBjb25zdCBjdXN0b21FdmVudFR5cGUgPSBEUkFHX09WRVJfQ1VTVE9NX0VWRU5UX1RZUEUsXG4gICAgICAgIGN1c3RvbUhhbmRsZXIgPSBkcmFnT3ZlckN1c3RvbUhhbmRsZXI7ICAvLy9cblxuICB0aGlzLm9mZkN1c3RvbUV2ZW50KGN1c3RvbUV2ZW50VHlwZSwgY3VzdG9tSGFuZGxlciwgZWxlbWVudCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgZHJvcCxcbiAgZHJhZ091dCxcbiAgZHJhZ092ZXIsXG4gIGVuYWJsZURyb3AsXG4gIGRpc2FibGVEcm9wLFxuICBvbkN1c3RvbURyb3AsXG4gIG9mZkN1c3RvbURyb3AsXG4gIG9uQ3VzdG9tRHJhZ091dCxcbiAgb2ZmQ3VzdG9tRHJhZ091dCxcbiAgb25DdXN0b21EcmFnT3ZlcixcbiAgb2ZmQ3VzdG9tRHJhZ092ZXJcbn1cblxuZnVuY3Rpb24gbW91c2VPdXRIYW5kbGVyKGV2ZW50LCBlbGVtZW50KSB7XG4gIGNvbnN0IHsgZHJhZ0VsZW1lbnQgfSA9IGdsb2JhbFRoaXM7XG5cbiAgaWYgKGRyYWdFbGVtZW50ICE9PSBudWxsKSB7XG4gICAgY29uc3QgZHJvcEVsZW1lbnQgPSBudWxsOyAvLy9cblxuICAgIE9iamVjdC5hc3NpZ24oZ2xvYmFsVGhpcywge1xuICAgICAgZHJvcEVsZW1lbnRcbiAgICB9KTtcblxuICAgIHRoaXMuZHJhZ091dChkcmFnRWxlbWVudCk7XG4gIH1cblxuICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbn1cblxuZnVuY3Rpb24gbW91c2VPdmVySGFuZGxlcihldmVudCwgZWxlbWVudCkge1xuICBjb25zdCB7IGRyYWdFbGVtZW50IH0gPSBnbG9iYWxUaGlzO1xuXG4gIGlmIChkcmFnRWxlbWVudCAhPT0gbnVsbCkge1xuICAgIGNvbnN0IGRyb3BFbGVtZW50ID0gdGhpcywgLy8vXG4gICAgICAgICAgZHJhZ0VsZW1lbnRJZ25vcmVzRHJvcEVsZW1lbnQgPSBjaGVja0RyYWdFbGVtZW50SWdub3Jlc0Ryb3BFbGVtZW50KGRyYWdFbGVtZW50LCBkcm9wRWxlbWVudCk7XG5cbiAgICBpZiAoZHJhZ0VsZW1lbnRJZ25vcmVzRHJvcEVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBPYmplY3QuYXNzaWduKGdsb2JhbFRoaXMsIHtcbiAgICAgIGRyb3BFbGVtZW50XG4gICAgfSk7XG5cbiAgICB0aGlzLmRyYWdPdmVyKGRyYWdFbGVtZW50KTtcbiAgfVxuXG4gIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xufVxuIl0sIm5hbWVzIjpbImNoZWNrRHJhZ0VsZW1lbnRJZ25vcmVzRHJvcEVsZW1lbnQiLCJEUk9QX0NVU1RPTV9FVkVOVF9UWVBFIiwiRFJBR19PVVRfQ1VTVE9NX0VWRU5UX1RZUEUiLCJEUkFHX09WRVJfQ1VTVE9NX0VWRU5UX1RZUEUiLCJkcm9wRWxlbWVudCIsIk9iamVjdCIsImFzc2lnbiIsImdsb2JhbFRoaXMiLCJkcm9wIiwiZHJhZ0VsZW1lbnQiLCJhYm9ydGVkIiwiZG9uZSIsImN1c3RvbUV2ZW50VHlwZSIsImNhbGxDdXN0b21IYW5kbGVyc0FzeW5jIiwiZHJhZ091dCIsImNhbGxDdXN0b21IYW5kbGVycyIsImRyYWdPdmVyIiwiZW5hYmxlRHJvcCIsIm9uTW91c2VPdXQiLCJtb3VzZU91dEhhbmRsZXIiLCJvbk1vdXNlT3ZlciIsIm1vdXNlT3ZlckhhbmRsZXIiLCJkaXNhYmxlRHJvcCIsIm9mZk1vdXNlT3V0Iiwib2ZmTW91c2VPdmVyIiwib25DdXN0b21Ecm9wIiwiZHJvcEN1c3RvbUhhbmRsZXIiLCJlbGVtZW50IiwiY3VzdG9tSGFuZGxlciIsIm9uQ3VzdG9tRXZlbnQiLCJvZmZDdXN0b21Ecm9wIiwib2ZmQ3VzdG9tRXZlbnQiLCJvbkN1c3RvbURyYWdPdXQiLCJkcmFnT3V0Q3VzdG9tSGFuZGxlciIsIm9mZkN1c3RvbURyYWdPdXQiLCJvbkN1c3RvbURyYWdPdmVyIiwiZHJhZ092ZXJDdXN0b21IYW5kbGVyIiwib2ZmQ3VzdG9tRHJhZ092ZXIiLCJldmVudCIsInN0b3BQcm9wYWdhdGlvbiIsImRyYWdFbGVtZW50SWdub3Jlc0Ryb3BFbGVtZW50Il0sInJhbmdlTWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiJBQUFBO0FBRUEsU0FBU0Esa0NBQWtDLFFBQVEseUJBQXlCO0FBQzVFLFNBQVNDLHNCQUFzQixFQUFFQywwQkFBMEIsRUFBRUMsMkJBQTJCLFFBQVEsc0JBQXNCO0FBRXRILElBQU1DLGNBQWM7QUFFcEJDLE9BQU9DLE1BQU0sQ0FBQ0MsWUFBWTtJQUN4QkgsYUFBQUE7QUFDRjtBQUVBLFNBQVNJLEtBQUtDLFdBQVcsRUFBRUMsT0FBTyxFQUFFQyxJQUFJO0lBQ3RDLElBQU1DLGtCQUFrQlg7SUFFeEIsSUFBSSxDQUFDWSx1QkFBdUIsQ0FBQ0QsaUJBQWlCSCxhQUFhQyxTQUFTQztBQUN0RTtBQUVBLFNBQVNHLFFBQVFMLFdBQVc7SUFDMUIsSUFBTUcsa0JBQWtCVjtJQUV4QixJQUFJLENBQUNhLGtCQUFrQixDQUFDSCxpQkFBaUJIO0FBQzNDO0FBRUEsU0FBU08sU0FBU1AsV0FBVztJQUMzQixJQUFNRyxrQkFBa0JUO0lBRXhCLElBQUksQ0FBQ1ksa0JBQWtCLENBQUNILGlCQUFpQkg7QUFDM0M7QUFFQSxTQUFTUTtJQUNQLElBQUksQ0FBQ0MsVUFBVSxDQUFDQyxpQkFBaUIsSUFBSTtJQUNyQyxJQUFJLENBQUNDLFdBQVcsQ0FBQ0Msa0JBQWtCLElBQUk7QUFDekM7QUFFQSxTQUFTQztJQUNQLElBQUksQ0FBQ0MsV0FBVyxDQUFDSixpQkFBaUIsSUFBSTtJQUN0QyxJQUFJLENBQUNLLFlBQVksQ0FBQ0gsa0JBQWtCLElBQUk7QUFDMUM7QUFFQSxTQUFTSSxhQUFhQyxpQkFBaUIsRUFBRUMsT0FBTztJQUM5QyxJQUFNZixrQkFBa0JYLHdCQUNsQjJCLGdCQUFnQkYsbUJBQW9CLEdBQUc7SUFFN0MsSUFBSSxDQUFDRyxhQUFhLENBQUNqQixpQkFBaUJnQixlQUFlRDtBQUNyRDtBQUVBLFNBQVNHLGNBQWNKLGlCQUFpQixFQUFFQyxPQUFPO0lBQy9DLElBQU1mLGtCQUFrQlgsd0JBQ2xCMkIsZ0JBQWdCRixtQkFBb0IsR0FBRztJQUU3QyxJQUFJLENBQUNLLGNBQWMsQ0FBQ25CLGlCQUFpQmdCLGVBQWVEO0FBQ3REO0FBRUEsU0FBU0ssZ0JBQWdCQyxvQkFBb0IsRUFBRU4sT0FBTztJQUNwRCxJQUFNZixrQkFBa0JWLDRCQUNsQjBCLGdCQUFnQkssc0JBQXVCLEdBQUc7SUFFaEQsSUFBSSxDQUFDSixhQUFhLENBQUNqQixpQkFBaUJnQixlQUFlRDtBQUNyRDtBQUVBLFNBQVNPLGlCQUFpQkQsb0JBQW9CLEVBQUVOLE9BQU87SUFDckQsSUFBTWYsa0JBQWtCViw0QkFDbEIwQixnQkFBZ0JLLHNCQUF1QixHQUFHO0lBRWhELElBQUksQ0FBQ0YsY0FBYyxDQUFDbkIsaUJBQWlCZ0IsZUFBZUQ7QUFDdEQ7QUFFQSxTQUFTUSxpQkFBaUJDLHFCQUFxQixFQUFFVCxPQUFPO0lBQ3RELElBQU1mLGtCQUFrQlQsNkJBQ2xCeUIsZ0JBQWdCUSx1QkFBd0IsR0FBRztJQUVqRCxJQUFJLENBQUNQLGFBQWEsQ0FBQ2pCLGlCQUFpQmdCLGVBQWVEO0FBQ3JEO0FBRUEsU0FBU1Usa0JBQWtCRCxxQkFBcUIsRUFBRVQsT0FBTztJQUN2RCxJQUFNZixrQkFBa0JULDZCQUNsQnlCLGdCQUFnQlEsdUJBQXdCLEdBQUc7SUFFakQsSUFBSSxDQUFDTCxjQUFjLENBQUNuQixpQkFBaUJnQixlQUFlRDtBQUN0RDtBQUVBLGVBQWU7SUFDYm5CLE1BQUFBO0lBQ0FNLFNBQUFBO0lBQ0FFLFVBQUFBO0lBQ0FDLFlBQUFBO0lBQ0FLLGFBQUFBO0lBQ0FHLGNBQUFBO0lBQ0FLLGVBQUFBO0lBQ0FFLGlCQUFBQTtJQUNBRSxrQkFBQUE7SUFDQUMsa0JBQUFBO0lBQ0FFLG1CQUFBQTtBQUNGLEVBQUM7QUFFRCxTQUFTbEIsZ0JBQWdCbUIsS0FBSyxFQUFFWCxPQUFPO0lBQ3JDLElBQU0sQUFBRWxCLGNBQWdCRixXQUFoQkU7SUFFUixJQUFJQSxnQkFBZ0IsTUFBTTtRQUN4QixJQUFNTCxjQUFjLE1BQU0sR0FBRztRQUU3QkMsT0FBT0MsTUFBTSxDQUFDQyxZQUFZO1lBQ3hCSCxhQUFBQTtRQUNGO1FBRUEsSUFBSSxDQUFDVSxPQUFPLENBQUNMO0lBQ2Y7SUFFQTZCLE1BQU1DLGVBQWU7QUFDdkI7QUFFQSxTQUFTbEIsaUJBQWlCaUIsS0FBSyxFQUFFWCxPQUFPO0lBQ3RDLElBQU0sQUFBRWxCLGNBQWdCRixXQUFoQkU7SUFFUixJQUFJQSxnQkFBZ0IsTUFBTTtRQUN4QixJQUFNTCxjQUFjLElBQUksRUFDbEJvQyxnQ0FBZ0N4QyxtQ0FBbUNTLGFBQWFMO1FBRXRGLElBQUlvQywrQkFBK0I7WUFDakM7UUFDRjtRQUVBbkMsT0FBT0MsTUFBTSxDQUFDQyxZQUFZO1lBQ3hCSCxhQUFBQTtRQUNGO1FBRUEsSUFBSSxDQUFDWSxRQUFRLENBQUNQO0lBQ2hCO0lBRUE2QixNQUFNQyxlQUFlO0FBQ3ZCIn0=